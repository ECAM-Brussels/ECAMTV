'use strict';

$(function() {
  try {
    // Launch WebSocket to update the widgets
    var websocket = new WebSocket('ws://' + ws_host + ':' + ws_port + '/websocket');
    websocket.onopen = function (event) {
      // Websocket opened
    };
    websocket.onmessage = function (event) {
      if (event.data) {
        var data = JSON.parse(event.data);
        $('#' + data['label']).html($(data['content']).html());
      }
    };
    websocket.onclose = function (event) {
      // Websocket closed
    };
  } catch (err) {
    console.log('Error while opening websocket: ' + err);
  }
});